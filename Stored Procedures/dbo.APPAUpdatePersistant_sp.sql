SET QUOTED_IDENTIFIER OFF
GO
SET ANSI_NULLS ON
GO

/* PVCS Revision or Version:Revision              
I:\vcs\AP\PROCS\appaup.SPv - e7.2.2 : 1.5
              Confidential Information                  
   Limited Distribution of Authorized Persons Only      
   Created 1996 and Protected as Unpublished Work       
         Under the U.S. Copyright Act of 1976           
Copyright (c) 1996 Epicor Software Corporation, 1996  
                 All Rights Reserved                    
*/                                                










 



					 










































 

















































































































































































































































































































































































































































































































































































 























































































CREATE PROC [dbo].[APPAUpdatePersistant_sp]
											@batch_ctrl_num		varchar(16),
											@process_group_num 	varchar(16),
											@client_id 			varchar(20),
											@user_id			int, 
											@debug_level		smallint = 0
	
AS

DECLARE
	@errbuf				varchar(100),
	@company_code 		varchar(8),
	@cm_flag 			smallint,
	@result				int



IF ( @debug_level > 1 ) SELECT CONVERT(char,getdate(),109) + "  " + "tmp/appaup.sp" + ", line " + STR( 63, 5 ) + " -- ENTRY: "
	

	EXEC @result = APPAModifyPersistant_sp	@batch_ctrl_num,
											@client_id,
											@user_id,
											@debug_level
	IF( @result != 0 )
 RETURN @result



	SELECT @company_code = company_code from glco 

	EXEC @result = gltrxsav_sp @process_group_num,
								@company_code
	IF( @result != 0 )
		RETURN -1

	SELECT @cm_flag = bb_flag
	FROM apco

 IF(@cm_flag = 1)
	BEGIN
		EXEC @result = cminpsav_sp
		IF( @result != 0 )
			RETURN -1
	END

	EXEC @result = appysav_sp	@user_id
	IF( @result != 0 )
		RETURN @result

	EXEC @result = apvosav_sp	@user_id
	IF( @result != 0 )
		RETURN @result


	IF ( @debug_level > 1 ) SELECT CONVERT(char,getdate(),109) + "  " + "tmp/appaup.sp" + ", line " + STR( 104, 5 ) + " -- EXIT: "
	
	RETURN 0

GO
GRANT EXECUTE ON  [dbo].[APPAUpdatePersistant_sp] TO [public]
GO
